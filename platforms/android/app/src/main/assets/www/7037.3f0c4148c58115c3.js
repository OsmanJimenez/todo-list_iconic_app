"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7037],{7037:(j,C,T)=>{T.r(C),T.d(C,{HomePageModule:()=>w});var c=T(177),i=T(4742),g=T(4341),f=T(9228);const h=Object.freeze({TEXTS:{TASK_TITLE_PLACEHOLDER:"T\xedtulo de la Tarea"}}),_=Object.freeze({TEXTS:{NO_CATEGORY_TEXT:"Sin Categor\xeda"},BUTTONS:{DELETE_TASK:{TEXT:"Eliminar",SLOT:"end",COLOR:"danger"}},CHECKBOX:{COMPLETION:{SLOT:"start"}},STATUSES:{PENDING:"PENDING",IN_PROGRESS:"IN_PROGRESS",COMPLETED:"COMPLETED",CANCELED:"CANCELED"}});var e=T(3953),u=T(1798),E=T(2471),d=T(9761);let k=(()=>{var o;class s{constructor(t){this.taskRepository=t}addTask(t,n,r=d.e.Pending){const l=new u.Y(this.generateId(),t,r,n,new Date);return this.taskRepository.save(l),l}deleteTask(t){this.taskRepository.delete(t)}toggleTaskCompletion(t){t.setStatus(t.status===d.e.Completed?d.e.Pending:d.e.Completed),this.taskRepository.save(t)}getTasks(t,n){const l=t*n;return this.taskRepository.findAll().sort((b,B)=>B.createdAt.getTime()-b.createdAt.getTime()).slice(l,l+n)}generateId(){return Math.random().toString(36).substr(2,9)}}return(o=s).\u0275fac=function(t){return new(t||o)(e.KVO(E.n))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),s})();const S=o=>({"task-completed":o});function I(o,s){if(1&o){const a=e.RV6();e.j41(0,"ion-button",6),e.bIt("click",function(){e.eBV(a);const n=e.XpG().$implicit,r=e.XpG();return e.Njj(r.deleteTask(n.id))}),e.EFF(1),e.k0s()}if(2&o){const a=e.XpG(2);e.Y8G("color",a.config.BUTTONS.DELETE_TASK.COLOR),e.BMQ("slot",a.config.BUTTONS.DELETE_TASK.SLOT),e.R7$(),e.SpI(" ",a.config.BUTTONS.DELETE_TASK.TEXT," ")}}function y(o,s){if(1&o){const a=e.RV6();e.j41(0,"ion-item")(1,"ion-label",3),e.EFF(2),e.k0s(),e.j41(3,"ion-checkbox",4),e.bIt("ionChange",function(){const n=e.eBV(a).$implicit,r=e.XpG();return e.Njj(r.toggleCompletion(n))}),e.k0s(),e.DNE(4,I,2,3,"ion-button",5),e.k0s()}if(2&o){const a=s.$implicit,t=e.XpG();e.R7$(),e.AVh("completed",a.status===t.config.STATUSES.COMPLETED),e.Y8G("ngClass",e.eq3(8,S,a.status===t.config.STATUSES.COMPLETED)),e.R7$(),e.Lme(" ",a.title," (",a.categoryId||t.config.TEXTS.NO_CATEGORY_TEXT,") "),e.R7$(),e.Y8G("checked",a.status===t.config.STATUSES.COMPLETED),e.BMQ("slot",t.config.CHECKBOX.COMPLETION.SLOT),e.R7$(),e.Y8G("ngIf",t.allowTaskDeletion)}}let m=(()=>{var o;class s{constructor(t){this.taskService=t,this.tasks=[],this.filteredTasks=[],this.config=_,this.filterCategoryId="",this.allowTaskDeletion=null,this.page=0,this.pageSize=20,this.totalTasks=0}ngOnInit(){this.loadTasks()}ngOnChanges(){this.applyFilter()}loadTasks(){this.page=0,this.tasks=this.taskService.getTasks(0,this.pageSize),this.totalTasks=this.tasks.length,this.applyFilter()}loadMoreTasks(t){this.page++;const n=this.taskService.getTasks(this.page,this.pageSize);this.tasks=[...this.tasks,...n],this.applyFilter(),t.target.complete(),this.filteredTasks.length>=this.totalTasks&&(t.target.disabled=!0)}applyFilter(){this.filteredTasks=""===this.filterCategoryId.trim()?this.tasks.slice(0,(this.page+1)*this.pageSize):this.tasks.filter(t=>t.categoryId===this.filterCategoryId).slice(0,(this.page+1)*this.pageSize)}toggleCompletion(t){this.taskService.toggleTaskCompletion(t),this.loadTasks()}deleteTask(t){this.allowTaskDeletion&&(this.taskService.deleteTask(t),this.loadTasks())}}return(o=s).\u0275fac=function(t){return new(t||o)(e.rXU(k))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-tasks"]],inputs:{filterCategoryId:"filterCategoryId",allowTaskDeletion:"allowTaskDeletion"},features:[e.OA$],decls:4,vars:1,consts:[[4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Cargando m\xe1s tareas..."],[3,"ngClass"],[3,"ionChange","checked"],[3,"color","click",4,"ngIf"],[3,"click","color"]],template:function(t,n){1&t&&(e.j41(0,"ion-list"),e.DNE(1,y,5,10,"ion-item",0),e.k0s(),e.j41(2,"ion-infinite-scroll",1),e.bIt("ionInfinite",function(l){return n.loadMoreTasks(l)}),e.nrm(3,"ion-infinite-scroll-content",2),e.k0s()),2&t&&(e.R7$(),e.Y8G("ngForOf",n.filteredTasks))},dependencies:[c.YU,c.Sq,c.bT,i.Jm,i.eY,i.Ax,i.Hp,i.uz,i.he,i.nf,i.hB],styles:[".task-completed[_ngcontent-%COMP%]{text-decoration:line-through;color:gray}"]}),s})();var p=T(680),O=T(8455),R=T(6354);let A=(()=>{var o;class s{constructor(t){this.remoteConfig=t}activateRemoteConfig(){return this.remoteConfig.settings.minimumFetchIntervalMillis=0,(0,O.H)((0,p.LF)(this.remoteConfig))}getBooleanValue$(t){return(0,p.jo)(this.remoteConfig,t).pipe((0,R.T)(n=>"true"===n))}}return(o=s).\u0275fac=function(t){return new(t||o)(e.KVO(p.$T))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),s})();const P=Object.freeze({TEXTS:{TASK_TITLE_PLACEHOLDER:"T\xedtulo de la Tarea",CATEGORY_ID_PLACEHOLDER:"ID de la Categor\xeda (opcional)"},BUTTONS:{ADD_TASK:{TEXT:"Agregar Tarea"}}});let v=(()=>{var o;class s{constructor(){this.newTaskTitle="",this.newTaskCategoryId="",this.config=P,this.addTask=new e.bkB}onAddTask(){this.newTaskTitle.trim()&&(this.addTask.emit({title:this.newTaskTitle,categoryId:this.newTaskCategoryId||void 0}),this.newTaskTitle="",this.newTaskCategoryId="")}}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-add-task"]],outputs:{addTask:"addTask"},decls:5,vars:5,consts:[[3,"ngModelChange","placeholder","ngModel"],[3,"click"]],template:function(t,n){1&t&&(e.j41(0,"ion-item")(1,"ion-input",0),e.mxI("ngModelChange",function(l){return e.DH7(n.newTaskTitle,l)||(n.newTaskTitle=l),l}),e.k0s(),e.j41(2,"ion-input",0),e.mxI("ngModelChange",function(l){return e.DH7(n.newTaskCategoryId,l)||(n.newTaskCategoryId=l),l}),e.k0s(),e.j41(3,"ion-button",1),e.bIt("click",function(){return n.onAddTask()}),e.EFF(4),e.k0s()()),2&t&&(e.R7$(),e.FS9("placeholder",n.config.TEXTS.TASK_TITLE_PLACEHOLDER),e.R50("ngModel",n.newTaskTitle),e.R7$(),e.FS9("placeholder",n.config.TEXTS.CATEGORY_ID_PLACEHOLDER),e.R50("ngModel",n.newTaskCategoryId),e.R7$(2),e.JRh(n.config.BUTTONS.ADD_TASK.TEXT))},dependencies:[g.BC,g.vS,i.Jm,i.$w,i.uz,i.Gw]}),s})();const D=Object.freeze({TEXTS:{FILTER_INPUT_CATEGORY_PLACEHOLDER:"Nombre de la Categor\xeda",FILTER_CATEGORY_PLACEHOLDER:"Filtrar por Nombre de la Categor\xeda"}});let F=(()=>{var o;class s{constructor(){this.filterCategoryId="",this.config=D,this.filterCategory=new e.bkB}onFilterChange(){this.filterCategory.emit(this.filterCategoryId)}}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-category-filter"]],outputs:{filterCategory:"filterCategory"},decls:4,vars:3,consts:[[3,"ngModelChange","ionInput","placeholder","ngModel"]],template:function(t,n){1&t&&(e.j41(0,"ion-item")(1,"ion-label"),e.EFF(2),e.k0s(),e.j41(3,"ion-input",0),e.mxI("ngModelChange",function(l){return e.DH7(n.filterCategoryId,l)||(n.filterCategoryId=l),l}),e.bIt("ionInput",function(){return n.onFilterChange()}),e.k0s()()),2&t&&(e.R7$(2),e.JRh(n.config.TEXTS.FILTER_CATEGORY_PLACEHOLDER),e.R7$(),e.FS9("placeholder",n.config.TEXTS.FILTER_INPUT_CATEGORY_PLACEHOLDER),e.R50("ngModel",n.filterCategoryId))},dependencies:[g.BC,g.vS,i.$w,i.uz,i.he,i.Gw]}),s})();function L(o,s){if(1&o){const a=e.RV6();e.j41(0,"app-add-task",3),e.bIt("addTask",function(n){e.eBV(a);const r=e.XpG();return e.Njj(r.addTask(n))}),e.k0s()}}function M(o,s){if(1&o){const a=e.RV6();e.j41(0,"app-category-filter",4),e.bIt("filterCategory",function(n){e.eBV(a);const r=e.XpG();return e.Njj(r.filterCategoryId=n)}),e.k0s()}}const H=[{path:"",component:(()=>{var o;class s{constructor(t,n){this.taskService=t,this.remoteConfigService=n,this.filterCategoryId="",this.config=h}ngOnInit(){this.loadRemoteConfig(),this.loadTasks()}loadTasks(){this.tasksComponent.loadTasks()}loadRemoteConfig(){this.remoteConfigService.activateRemoteConfig().subscribe(()=>{this.allowTaskCompletion$=this.remoteConfigService.getBooleanValue$("allowTaskCompletion"),this.allowTaskDeletion$=this.remoteConfigService.getBooleanValue$("allowTaskDeletion"),this.showAddTaskButton$=this.remoteConfigService.getBooleanValue$("showAddTaskButton"),this.enableCategoryFilter$=this.remoteConfigService.getBooleanValue$("enableCategoryFilter")})}addTask(t){this.taskService.addTask(t.title,t.categoryId),this.loadTasks()}toggleCompletion(t){this.taskService.toggleTaskCompletion(t),this.loadTasks()}deleteTask(t){this.taskService.deleteTask(t),this.loadTasks()}}return(o=s).\u0275fac=function(t){return new(t||o)(e.rXU(k),e.rXU(A))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-home"]],viewQuery:function(t,n){if(1&t&&e.GBs(m,5),2&t){let r;e.mGM(r=e.lsd())&&(n.tasksComponent=r.first)}},decls:11,vars:11,consts:[[3,"addTask",4,"ngIf"],[3,"filterCategory",4,"ngIf"],[3,"filterCategoryId","allowTaskDeletion"],[3,"addTask"],[3,"filterCategory"]],template:function(t,n){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.k0s()()(),e.j41(4,"ion-content"),e.DNE(5,L,1,0,"app-add-task",0),e.nI1(6,"async"),e.DNE(7,M,1,0,"app-category-filter",1),e.nI1(8,"async"),e.nrm(9,"app-tasks",2),e.nI1(10,"async"),e.k0s()),2&t&&(e.R7$(3),e.JRh(n.config.TEXTS.TASK_TITLE_PLACEHOLDER),e.R7$(2),e.Y8G("ngIf",e.bMT(6,5,n.showAddTaskButton$)),e.R7$(2),e.Y8G("ngIf",e.bMT(8,7,n.enableCategoryFilter$)),e.R7$(2),e.Y8G("filterCategoryId",n.filterCategoryId)("allowTaskDeletion",e.bMT(10,9,n.allowTaskDeletion$)))},dependencies:[c.bT,i.W9,i.eU,i.BC,i.ai,m,v,F,c.Jj],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),s})()}];let G=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[f.iI.forChild(H),f.iI]}),s})(),w=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[c.MD,g.YN,i.bv,G]}),s})()}}]);